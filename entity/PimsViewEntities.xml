<?xml version="1.0" encoding="UTF-8"?>
<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-2.0.xsd">

    <view-entity entity-name="SystemAndProject" package-name="mantle.work.effort">
        <member-entity entity-alias="WEAA" entity-name="mantle.work.effort.WorkEffortAssetAssign"/>
        <member-entity entity-alias="WE" entity-name="mantle.work.effort.WorkEffort" join-from-alias="WEAA">
            <key-map field-name="workEffortId"/>
        </member-entity>
        <member-entity entity-alias="AST" entity-name="mantle.product.asset.Asset" join-from-alias="WEAA">
            <key-map field-name="assetId"/>
        </member-entity>
        <alias-all entity-alias="WEAA"/>
        <alias-all entity-alias="WE">
            <exclude field="ownerPartyId"/>
            <exclude field="statusId"/>
        </alias-all>
        <alias-all entity-alias="AST">
            <exclude field="statusId"/>
            <exclude field="comments"/>
            <exclude field="facilityId"/>
        </alias-all>
        <alias name="assetStatusId" entity-alias="AST" field="statusId"/>
        <relationship type="one-nofk" title="WorkEffortAssetAssign" related-entity-name="moqui.basic.StatusItem"/>
    </view-entity>

    <view-entity entity-name="SubSystemSystemProject" package-name="mantle.work.effort">
        <member-entity entity-alias="SubSystem" entity-name="mantle.product.asset.Asset"/>
        <member-entity entity-alias="System" entity-name="mantle.product.asset.Asset" join-from-alias="SubSystem">
            <key-map field-name="parentAssetId" related-field-name="assetId"/>
        </member-entity>
        <member-entity entity-alias="WEAA" entity-name="mantle.work.effort.WorkEffortAssetAssign" join-from-alias="System">
            <key-map field-name="assetId"/>
        </member-entity>
        <member-entity entity-alias="WE" entity-name="mantle.work.effort.WorkEffort" join-from-alias="WEAA">
            <key-map field-name="workEffortId"/>
        </member-entity>

        <alias-all entity-alias="SubSystem">
            <exclude field="facilityId"/>
        </alias-all>
        <alias-all entity-alias="WEAA">
            <exclude field="statusId"/>
            <exclude field="comments"/>
        </alias-all>
        <alias-all entity-alias="WE">
            <exclude field="ownerPartyId"/>
            <exclude field="statusId"/>
        </alias-all>
        <alias name="systemName" field="assetName" entity-alias="System"/>
    </view-entity>
</entities>